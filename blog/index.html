<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AOB Contábil</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
    <script src="https://unpkg.com/scrollreveal"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.inputmask/5.0.6/jquery.inputmask.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body class="bg-white">

    <!-- Seção de Destaques do Blog -->
    <section id="blog" class="bg-gray-100 py-16">
        <div class="reveal-scale max-w-screen-xl mx-auto px-4">
            <h2 class="text-4xl font-bold text-center text-sky-600 mb-8">Destaques do Blog</h2>
            <div id="blog-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Posts do Blog serão inseridos aqui -->
            </div>
        </div>
    </section>

    <script>
        async function fetchPosts() {
            try {
                const response = await fetch('http://localhost:1337/api/blog-posts');
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const posts = await response.json();
                console.log(posts); // Verifique os dados recebidos
                return posts.data;
            } catch (error) {
                console.error('Error fetching posts:', error);
                return [];
            }
        }

        function createPostElement(post) {
            const postElement = document.createElement('div');
            postElement.className = 'bg-white rounded-lg shadow-lg p-6';
            postElement.innerHTML = `
                <img src="http://localhost:1337${post.attributes.image.data.attributes.url}" alt="${post.attributes.title}" class="h-48 w-full object-cover mb-4">
                <h3 class="text-xl font-semibold text-gray-800 mb-2">${post.attributes.title}</h3>
                <p class="text-gray-600">${post.attributes.summary}</p>
                <a href="post.html?id=${post.id}" class="text-sky-600 font-semibold hover:underline mt-auto">Leia Mais</a>
            `;
            return postElement;
        }

        document.addEventListener('DOMContentLoaded', async () => {
            const posts = await fetchPosts();
            const blogContainer = document.getElementById('blog-container');
            if (posts.length === 0) {
                blogContainer.innerHTML = '<p>No blog posts found.</p>';
            } else {
                posts.forEach(post => {
                    const postElement = createPostElement(post);
                    blogContainer.appendChild(postElement);
                });
            }
        });
    </script>

</body>

</html>